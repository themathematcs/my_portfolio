import{r as o,M as _,j as s,i as H,u as A,a as T,b as O,d as D,L as K,c as v,m as z,e as V}from"./index-BfdcLayx.js";function P(e,a){if(typeof e=="function")return e(a);e!=null&&(e.current=a)}function q(...e){return a=>{let t=!1;const l=e.map(r=>{const n=P(r,a);return!t&&typeof n=="function"&&(t=!0),n});if(t)return()=>{for(let r=0;r<l.length;r++){const n=l[r];typeof n=="function"?n():P(e[r],null)}}}}function B(...e){return o.useCallback(q(...e),e)}class F extends o.Component{getSnapshotBeforeUpdate(a){const t=this.props.childRef.current;if(t&&a.isPresent&&!this.props.isPresent){const l=t.offsetParent,r=H(l)&&l.offsetWidth||0,n=this.props.sizeRef.current;n.height=t.offsetHeight||0,n.width=t.offsetWidth||0,n.top=t.offsetTop,n.left=t.offsetLeft,n.right=r-n.width-n.left}return null}componentDidUpdate(){}render(){return this.props.children}}function U({children:e,isPresent:a,anchorX:t,root:l}){const r=o.useId(),n=o.useRef(null),u=o.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=o.useContext(_),b=B(n,e==null?void 0:e.ref);return o.useInsertionEffect(()=>{const{width:c,height:g,top:d,left:x,right:i}=u.current;if(a||!n.current||!c||!g)return;const f=t==="left"?`left: ${x}`:`right: ${i}`;n.current.dataset.motionPopId=r;const m=document.createElement("style");h&&(m.nonce=h);const C=l??document.head;return C.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${g}px !important;
            ${f}px !important;
            top: ${d}px !important;
          }
        `),()=>{C.contains(m)&&C.removeChild(m)}},[a]),s.jsx(F,{isPresent:a,childRef:n,sizeRef:u,children:o.cloneElement(e,{ref:b})})}const W=({children:e,initial:a,isPresent:t,onExitComplete:l,custom:r,presenceAffectsLayout:n,mode:u,anchorX:h,root:b})=>{const c=A(X),g=o.useId();let d=!0,x=o.useMemo(()=>(d=!1,{id:g,initial:a,isPresent:t,custom:r,onExitComplete:i=>{c.set(i,!0);for(const f of c.values())if(!f)return;l&&l()},register:i=>(c.set(i,!1),()=>c.delete(i))}),[t,c,l]);return n&&d&&(x={...x}),o.useMemo(()=>{c.forEach((i,f)=>c.set(f,!1))},[t]),o.useEffect(()=>{!t&&!c.size&&l&&l()},[t]),u==="popLayout"&&(e=s.jsx(U,{isPresent:t,anchorX:h,root:b,children:e})),s.jsx(T.Provider,{value:x,children:e})};function X(){return new Map}const k=e=>e.key||"";function S(e){const a=[];return o.Children.forEach(e,t=>{o.isValidElement(t)&&a.push(t)}),a}const G=({children:e,custom:a,initial:t=!0,onExitComplete:l,presenceAffectsLayout:r=!0,mode:n="sync",propagate:u=!1,anchorX:h="left",root:b})=>{const[c,g]=O(u),d=o.useMemo(()=>S(e),[e]),x=u&&!c?[]:d.map(k),i=o.useRef(!0),f=o.useRef(d),m=A(()=>new Map),[C,$]=o.useState(d),[w,E]=o.useState(d);D(()=>{i.current=!1,f.current=d;for(let y=0;y<w.length;y++){const p=k(w[y]);x.includes(p)?m.delete(p):m.get(p)!==!0&&m.set(p,!1)}},[w,x.length,x.join("-")]);const N=[];if(d!==C){let y=[...d];for(let p=0;p<w.length;p++){const j=w[p],R=k(j);x.includes(R)||(y.splice(p,0,j),N.push(j))}return n==="wait"&&N.length&&(y=N),E(S(y)),$(d),null}const{forceRender:M}=o.useContext(K);return s.jsx(s.Fragment,{children:w.map(y=>{const p=k(y),j=u&&!c?!1:d===w||x.includes(p),R=()=>{if(m.has(p))m.set(p,!0);else return;let I=!0;m.forEach(L=>{L||(I=!1)}),I&&(M==null||M(),E(f.current),u&&(g==null||g()),l&&l())};return s.jsx(W,{isPresent:j,initial:!i.current||t?void 0:!1,custom:a,presenceAffectsLayout:r,mode:n,root:b,onExitComplete:j?void 0:R,anchorX:h,children:y},p)})})};/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Y=v("bot",J);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Z=v("message-square",Q);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],te=v("send",ee);/**
 * @license lucide-react v0.556.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ne=v("x",se),oe="/.netlify/functions/gemini-proxy",re=async(e,a)=>{try{const t=await fetch(oe,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userMessage:e})});if(!t.ok){const n=await t.json();throw new Error(n.error||"Proxy failed to get response.")}let r=(await t.json()).text||"Sorry, I could not retrieve an answer from the AI assistant.";a(n=>{const u=[...n],h=u[u.length-1];return h.role==="model"&&(h.text=r),u})}catch(t){console.error("Error calling AI proxy:",t),a(l=>{const r=[...l];return r[r.length-1]={role:"model",text:"An error occurred while connecting to the AI. Check console for details."},r})}},ae=({onClose:e})=>{const[a,t]=o.useState(!1),[l,r]=o.useState([{role:"model",text:"Hi! I'm Christian's AI assistant. Ask me anything about his skills, certifications, or projects."}]),[n,u]=o.useState(""),[h,b]=o.useState(!1),c=o.useRef(null),g=()=>{var i;(i=c.current)==null||i.scrollIntoView({behavior:"smooth"})};o.useEffect(()=>{g()},[l,h]);const d=async()=>{if(!n.trim()||h)return;const i=n.trim();u(""),r(f=>[...f,{role:"user",text:i}]),b(!0),r(f=>[...f,{role:"model",text:""}]),await re(i,r),b(!1)},x=i=>{i.key==="Enter"&&d()};return s.jsxs(s.Fragment,{children:[s.jsx(z.button,{className:"fixed bottom-6 right-6 z-50 p-4 bg-gradient-to-r from-neon-purple to-neon-pink text-white rounded-full shadow-lg shadow-neon-purple/30 hover:shadow-neon-pink/50 transition-shadow border border-white/20",whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>t(!a),initial:{scale:0},animate:{scale:1},children:s.jsx(Z,{size:24})}),s.jsx(G,{children:a&&s.jsxs(z.div,{initial:{opacity:0,y:100,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.9},className:"fixed bottom-24 right-6 w-[90vw] md:w-96 h-[500px] max-h-[80vh] glass-card rounded-2xl z-50 flex flex-col overflow-hidden ring-1 ring-white/10",children:[s.jsxs("div",{className:"p-4 bg-white/5 backdrop-blur-md flex justify-between items-center border-b border-white/10",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Y,{size:20,className:"text-neon-cyan"}),s.jsx("h4",{className:"text-lg font-semibold text-slate-100",children:"AI Assistant"})]}),s.jsx("button",{onClick:()=>{t(!1),e==null||e()},className:"text-white/60 hover:text-white transition-colors","aria-label":"Close Chat",children:s.jsx(ne,{size:24})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scroll-smooth",children:[l.map((i,f)=>s.jsx("div",{className:`flex ${i.role==="user"?"justify-end":"justify-start"}`,children:s.jsx("div",{className:`max-w-[85%] p-3.5 rounded-2xl text-sm backdrop-blur-sm shadow-sm ${i.role==="user"?"bg-neon-purple/80 text-white rounded-tr-none border border-neon-purple/20":"glass-card text-slate-200 rounded-tl-none border-white/10"}`,children:i.text})},f)),h&&s.jsx("div",{className:"flex justify-start",children:s.jsxs("div",{className:"glass-card px-4 py-3 rounded-2xl rounded-tl-none flex items-center gap-1.5 border-white/10",children:[s.jsx("span",{className:"w-2 h-2 bg-neon-cyan rounded-full animate-bounce [animation-delay:-0.3s]"}),s.jsx("span",{className:"w-2 h-2 bg-neon-purple rounded-full animate-bounce [animation-delay:-0.15s]"}),s.jsx("span",{className:"w-2 h-2 bg-neon-pink rounded-full animate-bounce"})]})}),s.jsx("div",{ref:c})]}),s.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md border-t border-white/10",children:s.jsxs("div",{className:"flex items-center gap-2 bg-black/20 p-2 rounded-xl border border-white/10 focus-within:border-neon-purple/50 transition-colors shadow-inner",children:[s.jsx("input",{type:"text",value:n,onChange:i=>u(i.target.value),onKeyDown:x,placeholder:"Ask about projects...",className:"flex-1 bg-transparent border-none outline-none text-sm px-2 text-white placeholder:text-slate-500",disabled:h}),s.jsx("button",{onClick:d,disabled:h||!n.trim(),className:"p-2 bg-neon-purple/80 rounded-lg text-white hover:bg-neon-purple disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg shadow-neon-purple/10",children:h?s.jsx(V,{size:16,className:"animate-spin"}):s.jsx(te,{size:16})})]})})]})})]})};export{ae as default};
